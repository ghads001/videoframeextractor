<html lang="en"><head><meta charset="UTF-8"><title>Video Frame Extractor</title><style>body {background-color: #1e1e1e;color: #ffffff;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;margin: 0;overflow-y: auto;}.container {display: flex;flex-direction: column;align-items: center;padding: 20px;}h1 {font-size: 3em;margin-bottom: 10px;animation: fadeInDown 1s ease-out;}.author {font-size: 1.2em;margin-bottom: 30px;color: #aaaaaa;}.btn {background-color: #ff4081;border: none;color: white;padding: 15px 30px;font-size: 1em;cursor: pointer;margin: 10px 5px;border-radius: 50px;transition: background-color 0.3s ease;text-align: center;}.btn:hover {background-color: #f50057;}.btn-secondary {background-color: #448aff;}.btn-secondary:hover {background-color: #2979ff;}#progress-container {width: 80%;max-width: 600px;background-color: #333;border-radius: 20px;overflow: hidden;display: none;margin-top: 20px;}#progress-bar {height: 20px;background-color: #76ff03;width: 0%;}#download-link {color: #448aff;text-decoration: none;font-size: 1.2em;margin-top: 20px;display: none;animation: fadeInUp 1s ease-out;}#format-label {margin-top: 10px;font-size: 1em;}select, #frame-input, #video-selector {background-color: #333;color: white;border: none;padding: 10px;font-size: 1em;border-radius: 20px;margin-top: 5px;width: 80%;max-width: 400px;text-align: center;}#frame-input {display: none;}input[type="file"] {display: none;}label.radio-label {margin-top: 10px;font-size: 1em;}.radio-group {display: flex;justify-content: center;margin-top: 10px;flex-wrap: wrap;}.radio-group label {margin: 5px 10px;cursor: pointer;}input[type="radio"] {display: none;}input[type="radio"] + label {background-color: #333;color: white;border-radius: 20px;padding: 10px 20px;transition: background-color 0.3s ease;}input[type="radio"]:checked + label {background-color: #448aff;}@keyframes fadeInDown {from { opacity: 0; transform: translateY(-50px); }to { opacity: 1; transform: translateY(0); }}@keyframes fadeInUp {from { opacity: 0; transform: translateY(50px); }to { opacity: 1; transform: translateY(0); }}#video-container {display: none;position: relative;width: 80%;max-width: 800px;margin-top: 20px;}#video {width: 100%;border-radius: 10px;}#overlay {position: absolute;top: 10px;left: 10px;color: #ffffff;background-color: rgba(0, 0, 0, 0.5);padding: 5px 10px;border-radius: 5px;font-size: 1.2em;}#drop-area {border: 2px dashed #ffffff;border-radius: 20px;width: 80%;max-width: 600px;padding: 50px;text-align: center;margin-top: 20px;transition: background-color 0.3s ease;}#drop-area.hover {background-color: #333333;}#drop-area p {font-size: 1.5em;color: #ffffff;margin: 0;}#images-container {display: flex;flex-wrap: wrap;justify-content: center;margin-top: 20px;}#images-container img {border: 1px solid #444;border-radius: 5px;max-width: 200px;margin: 10px;}@media (max-width: 600px) {h1 {font-size: 2em;}.btn {padding: 10px 20px;font-size: 0.9em;}#drop-area {padding: 30px;}select, #frame-input, #video-selector {width: 100%;}}</style></head><body><div class="container"><h1>Video Frame Extractor</h1><p class="author">By Ash Lightowler</p><label class="btn" id="upload-label" for="video-input">Select Videos</label><input type="file" id="video-input" accept="video/*" multiple><div id="drop-area"><p>Drag & Drop Your Video Files Here</p></div><label id="format-label">Select Image Format:</label><select id="image-format"><option value="png">PNG</option><option value="jpeg">JPEG</option></select><select id="video-selector" style="display: none;"></select><button class="btn btn-secondary" id="remove-file-button" style="display: none;">Remove Selected File</button><div class="radio-group"><input type="radio" id="export-all" name="frame-option" value="all" checked><label for="export-all">All Frames</label><input type="radio" id="export-selected" name="frame-option" value="selected"><label for="export-selected">Selected Frames</label></div><input type="text" id="frame-input" placeholder="Enter frame numbers separated by commas, e.g., 1, 2, 3"><button class="btn btn-secondary" id="extract-button" style="display: none;">Extract Frames</button><button class="btn" id="clear-button" style="display: none;">Clear Videos</button><div id="progress-container"><div id="progress-bar"></div></div><a id="download-link" href="#">Download Frames</a><button class="btn" id="download-zip-button" style="display: none;">Download as Zip File</button><button class="btn" id="download-images-button" style="display: none;">Download as Separate Images</button><div id="video-container"><video id="video" controls></video><div id="overlay"></div></div><canvas id="canvas" style="display: none;"></canvas><div id="images-container"></div></div></body><script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script><script>const videoInput = document.getElementById('video-input');const video = document.getElementById('video');const canvas = document.getElementById('canvas');const extractButton = document.getElementById('extract-button');const clearButton = document.getElementById('clear-button');const downloadLink = document.getElementById('download-link');const progressContainer = document.getElementById('progress-container');const progressBar = document.getElementById('progress-bar');const imageFormatSelect = document.getElementById('image-format');const exportAllRadio = document.getElementById('export-all');const exportSelectedRadio = document.getElementById('export-selected');const frameInput = document.getElementById('frame-input');const videoContainer = document.getElementById('video-container');const dropArea = document.getElementById('drop-area');const videoSelector = document.getElementById('video-selector');const removeFileButton = document.getElementById('remove-file-button');const overlay = document.getElementById('overlay');const imagesContainer = document.getElementById('images-container');const context = canvas.getContext('2d');let fps = 24;let framesExtracted = 0;let totalFrames = 0;let zip = new JSZip();let videoFiles = [];let singleFrameBlob = null;let imageBlobs = [];const downloadZipButton = document.getElementById('download-zip-button');const downloadImagesButton = document.getElementById('download-images-button');videoInput.addEventListener('change', () => {handleFiles(videoInput.files);});['dragenter', 'dragover'].forEach(eventName => {dropArea.addEventListener(eventName, (e) => {e.preventDefault();e.stopPropagation();dropArea.classList.add('hover');}, false);});['dragleave', 'drop'].forEach(eventName => {dropArea.addEventListener(eventName, (e) => {e.preventDefault();e.stopPropagation();dropArea.classList.remove('hover');}, false);});dropArea.addEventListener('drop', (e) => {const dt = e.dataTransfer;const files = dt.files;handleFiles(files);}, false);function handleFiles(files) {const fileArray = Array.from(files);if (fileArray.length > 0) {extractButton.style.display = 'inline-block';videoContainer.style.display = 'block';videoFiles = videoFiles.concat(fileArray);videoSelector.innerHTML = '';videoFiles.forEach((file, index) => {const option = document.createElement('option');option.value = index;option.textContent = file.name;videoSelector.appendChild(option);});videoSelector.style.display = videoFiles.length > 1 ? 'block' : 'none';videoSelector.selectedIndex = videoFiles.length - 1;loadVideo(videoFiles[videoSelector.selectedIndex]);clearButton.style.display = 'inline-block';removeFileButton.style.display = videoFiles.length > 1 ? 'inline-block' : 'none';}}function loadVideo(file) {const fileURL = URL.createObjectURL(file);video.src = fileURL;}video.addEventListener('timeupdate', () => {const currentFrame = Math.floor(video.currentTime * fps);overlay.textContent = `Frame: ${currentFrame}`;});videoSelector.addEventListener('change', () => {const selectedIndex = videoSelector.selectedIndex;if (selectedIndex !== -1) {loadVideo(videoFiles[selectedIndex]);}});exportAllRadio.addEventListener('change', () => {if (exportAllRadio.checked) {frameInput.style.display = 'none';}});exportSelectedRadio.addEventListener('change', () => {if (exportSelectedRadio.checked) {frameInput.style.display = 'block';}});extractButton.addEventListener('click', () => {extractButton.style.display = 'none';progressContainer.style.display = 'block';imageBlobs = [];zip = new JSZip();framesExtracted = 0;totalFrames = 0;progressBar.style.width = '0%';singleFrameBlob = null;const framePromises = videoFiles.map(file => getVideoDuration(file).then(duration => {if (exportAllRadio.checked) {return Math.floor(duration * fps);} else {const frameNumbers = getSelectedFrameNumbers();return frameNumbers.length;}}));Promise.all(framePromises).then(frameCounts => {totalFrames = frameCounts.reduce((a, b) => a + b, 0);extractFramesFromFiles(videoFiles);});});function getVideoDuration(file) {return new Promise(resolve => {const tempVideo = document.createElement('video');tempVideo.preload = 'metadata';tempVideo.src = URL.createObjectURL(file);tempVideo.onloadedmetadata = function() {URL.revokeObjectURL(this.src);resolve(tempVideo.duration);};});}async function extractFramesFromFiles(files) {for (let i = 0; i < files.length; i++) {const file = files[i];await extractFramesFromFile(file);}finalizeZip();}async function extractFramesFromFile(file) {return new Promise(resolve => {video.onloadedmetadata = async function() {canvas.width = video.videoWidth;canvas.height = video.videoHeight;const duration = video.duration;const videoName = file.name.split('.').slice(0, -1).join('.');const sanitizedName = videoName.replace(/[^a-zA-Z0-9]/g, '-').slice(0, 50);if (exportAllRadio.checked) {await extractAllFramesFromVideo(sanitizedName, duration);} else {const frameNumbers = getSelectedFrameNumbers();await extractSelectedFramesFromVideo(sanitizedName, frameNumbers);}resolve();};loadVideo(file);});}function getSelectedFrameNumbers() {return frameInput.value.split(',').map(num => parseInt(num.trim())).filter(num => !isNaN(num) && num >= 0);}async function extractAllFramesFromVideo(videoName, duration) {const sanitizedName = videoName.replace(/[^a-zA-Z0-9]/g, '-').slice(0, 50);const imageFormat = imageFormatSelect.value;const mimeType = 'image/' + imageFormat;const fileExtension = imageFormat === 'jpeg' ? 'jpg' : imageFormat;let currentTime = 0;let frameCount = 0; while (currentTime <= duration) {await seekToTime(currentTime);context.drawImage(video, 0, 0, canvas.width, canvas.height);const blob = await new Promise(resolve => canvas.toBlob(resolve, mimeType));const frameNumber = Math.floor(video.currentTime * fps);const truncatedName = truncateFilename(videoName, fileExtension, frameNumber);const fileName = `${truncatedName}_frame_${String(frameNumber).padStart(6, '0')}.${fileExtension}`;zip.file(fileName, blob);imageBlobs.push({ name: fileName, blob: blob, frameNumber: frameNumber, videoName: sanitizedName });framesExtracted++;frameCount++;updateProgressBar();currentTime += 1 / fps;if (totalFrames === 1) {singleFrameBlob = blob;}}}async function extractSelectedFramesFromVideo(videoName, frameNumbers) {const sanitizedName = videoName.replace(/[^a-zA-Z0-9]/g, '-').slice(0, 50);const imageFormat = imageFormatSelect.value;const mimeType = 'image/' + imageFormat;const fileExtension = imageFormat === 'jpeg' ? 'jpg' : imageFormat;let frameCount = 0;for (let i = 0; i < frameNumbers.length; i++) {const frameNumber = frameNumbers[i];const currentTime = frameNumber / fps;if (currentTime > video.duration) continue;await seekToTime(currentTime);context.drawImage(video, 0, 0, canvas.width, canvas.height);const blob = await new Promise(resolve => canvas.toBlob(resolve, mimeType));const truncatedName = truncateFilename(sanitizedName, fileExtension, frameNumber);const fileName = `${truncatedName}_frame_${String(frameNumber).padStart(6, '0')}.${fileExtension}`;zip.file(fileName, blob);imageBlobs.push({ name: fileName, blob: blob, frameNumber: frameNumber, videoName: sanitizedName });framesExtracted++;frameCount++;updateProgressBar();if (totalFrames === 1) {singleFrameBlob = blob;}}}function finalizeZip() {progressContainer.style.display = 'none';imagesContainer.innerHTML = ''; imagesContainer.style.display = 'flex'; imageBlobs.forEach((image) => {const imageURL = URL.createObjectURL(image.blob);const imgElement = document.createElement('img');imgElement.src = imageURL;imgElement.alt = image.name;const downloadButton = document.createElement('button');downloadButton.className = 'btn btn-secondary';downloadButton.textContent = `Download Frame ${image.frameNumber}`;downloadButton.onclick = () => {const link = document.createElement('a');link.href = imageURL;link.download = image.name;link.click();URL.revokeObjectURL(imageURL);};const imageContainer = document.createElement('div');imageContainer.style.display = 'flex';imageContainer.style.flexDirection = 'column';imageContainer.style.alignItems = 'center';imageContainer.style.margin = '10px';imageContainer.appendChild(imgElement);imageContainer.appendChild(downloadButton);imagesContainer.appendChild(imageContainer);});if (totalFrames === 1 && singleFrameBlob) {const imageFormat = imageFormatSelect.value;const fileExtension = imageFormat === 'jpeg' ? 'jpg' : imageFormat;let fileName = imageBlobs[0].name;const imageURL = URL.createObjectURL(singleFrameBlob);downloadZipButton.style.display = 'inline-block';downloadImagesButton.style.display = 'none';downloadZipButton.textContent = 'Download Frame';downloadZipButton.onclick = () => {const link = document.createElement('a');link.href = imageURL;link.download = fileName;link.click();URL.revokeObjectURL(imageURL);};} else {downloadZipButton.style.display = 'inline-block';downloadImagesButton.style.display = 'inline-block';downloadZipButton.textContent = 'Download as Zip File';downloadImagesButton.onclick = async () => {imageBlobs.forEach((image) => {const imageURL = URL.createObjectURL(image.blob);const link = document.createElement('a');link.href = imageURL;link.download = image.name;imagesContainer.appendChild(link);link.click();imagesContainer.removeChild(link);URL.revokeObjectURL(imageURL);});};zip.generateAsync({ type: 'blob' }).then(function(content) {const zipBlob = content;const zipURL = URL.createObjectURL(zipBlob);let zipFileName = 'frames.zip';if (videoFiles.length === 1) {const videoName = videoFiles[0].name.split('.').slice(0, -1).join('.');const sanitizedName = videoName.replace(/[^a-zA-Z0-9]/g, '-').slice(0, 50);zipFileName = `${sanitizedName}_frames.zip`; }downloadZipButton.onclick = () => {const link = document.createElement('a');link.href = zipURL;link.download = zipFileName;link.click();};});}}function updateProgressBar() {const progress = (framesExtracted / totalFrames) * 100;progressBar.style.width = progress + '%';}function seekToTime(time) {return new Promise(resolve => {function onSeeked() {video.removeEventListener('seeked', onSeeked);resolve();}video.addEventListener('seeked', onSeeked);video.currentTime = time;});}function truncateFilename(name, extension, frameNumber) {const maxFilenameLength = 255;const framePartLength = `_frame_${String(frameNumber).padStart(6, '0')}.${extension}`.length;const maxNameLength = maxFilenameLength - framePartLength;return name.slice(0, maxNameLength);}clearButton.addEventListener('click', () => {videoFiles = [];videoInput.value = '';extractButton.style.display = 'none';videoContainer.style.display = 'none';videoSelector.style.display = 'none';clearButton.style.display = 'none';video.src = '';video.load();videoSelector.innerHTML = '';removeFileButton.style.display = 'none';downloadLink.style.display = 'none';progressContainer.style.display = 'none';imageBlobs = [];imagesContainer.innerHTML = '';});removeFileButton.addEventListener('click', () => {const selectedIndex = videoSelector.selectedIndex;if (selectedIndex !== -1) {videoFiles.splice(selectedIndex, 1);videoSelector.remove(selectedIndex);if (videoFiles.length > 0) {videoSelector.selectedIndex = 0;loadVideo(videoFiles[0]);} else {video.src = '';video.load();videoContainer.style.display = 'none';extractButton.style.display = 'none';}removeFileButton.style.display = videoFiles.length > 1 ? 'inline-block' : 'none';}});</script></body></html>